{% load custom_tags %}
<!DOCTYPE html>
<html lang="en" xml:lang="en">
<head>
    <meta name="generator" content=
            "HTML Tidy for Windows (vers 14 February 2006), see www.w3.org">
    <title> LEMR</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="{{ STATIC_URL }}css/bootstrap.css" rel="stylesheet">
    <link href="{{ STATIC_URL }}custom_css/bs_3.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <script src="http://code.highcharts.com/stock/highstock.js"></script>
    <script src="http://code.highcharts.com/stock/modules/exporting.js"></script>
    <![endif]-->


    <!-- Collect the nav links, forms, and other content for toggling -->
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <!-- Scrips for when you have an internet connetion
    <script src="https://code.jquery.com/jquery.js" type="text/javascript"></script>
    <script src="http://code.highcharts.com/stock/highstock.js"  type="text/javascript"></script>
    Otherwise use what is below-->
    <script src="{{ STATIC_URL }}jcode/jquery.js"></script>
    <script src="{{ STATIC_URL }}jcode//highstock.js"></script>
    <!--<script src="{{ STATIC_URL }}jcode//jquery.sortable.min.js"></script>-->

    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="{{ STATIC_URL }}js/bootstrap.min.js"></script>
    <script src="{{ STATIC_URL }}js/emr_3.js"></script>
    <script>
        {% autoescape off %}
            setDefaultTimes({{ global_lab_info|safe }});
            set_ids({{demographics_dict.id}}, {{ study_id }});
        {% endautoescape %}
    </script>
    <link rel="shortcut icon" href="http://1.bp.blogspot.com/-TdYjaROCETM/Ut5oe76Kh_I/AAAAAAAAADc/Apb5XeNl83A/s1600/Lemer+sm.jpg"/>
</head>
<body>
<!-- Brand and toggle get grouped for better mobile display -->
<div class="container">
<div class="row">
<div class="col-12 navbar-fixed-top navbar-inverse ">

    <ul class="nav navbar-nav">
        <li>
            {% if prev_enabled %}
                <a href="/LEMRinterface/{{ prev_patient }}/{{ version_num }}/{{ study_id }}/{{ demographics_dict.id }}" onclick='show_loading()' style="color:greenyellow"><span class="glyphicon glyphicon-arrow-left" aria-hidden="true"></span></a>
            {% else %}
                <a  style="color:greenyellow"><span class="glyphicon glyphicon-stop" aria-hidden="true"></span></a>
            {% endif %}
        </li>
        <li><a href="/LEMRinterface/"><span class="glyphicon glyphicon-home" aria-hidden="true" style="color:greenyellow"></span></a></li>
        <li style="border-right:solid;border-width:6px;border-right-color:#B0B0B0">
            {% if next_enabled %}
                <a href="/LEMRinterface/{{ next_patient }}/{{ version_num }}/{{ study_id }}/{{ demographics_dict.id }}" onclick='show_loading()'><span class="glyphicon glyphicon-arrow-right" aria-hidden="true" style="color:greenyellow"></span></a>
            {% else %}
                <a><span class="glyphicon glyphicon-stop" aria-hidden="true" style="color:greenyellow"></span></a>
            {% endif %}
        </li>
        <p class="navbar-text" style="color:#f5f5f5;">Patient #{{ demographics_dict.id }}:</p>
        <p class="navbar-text" style="color:#f5f5f5;">{{ demographics_dict.age }} yo {{ demographics_dict.sex }}</p>
        <p class="navbar-text" style="color:#f5f5f5;">{{ demographics_dict.height }} cm</p>
        <p class="navbar-text" style="color:#f5f5f5;">{{ demographics_dict.weight }} kg</p>
        <p class="navbar-text" style="color:#f5f5f5;">BMI: {{ demographics_dict.bmi }}</p>
        <p class="navbar-text" style="color:#f5f5f5;width:500px;"> Admitting Diagnosis: {{ demographics_dict.diagnosis }}</p>
        <p class="navbar-text" style="color:#f5f5f5;"> Time Selector: </p>
    </ul>
                <div class="chartcolTS" id="time_selector">
                    <script>
                    {% autoescape off %}
                    getchartTS("div[id='time_selector']", {{ global_lab_info|safe }}, "{{ procedures }}");
                    {% endautoescape %}
                    </script>
                </div>
</div>
</div>


<div class="row">

    <div class="col-lg-8 scroll-box">
        <div class="timepane col-md-3" >
            <div class="vit-timerow" id="time">
                <div class="chartcol3" id="lab-time1">
                    <script>
                    {% autoescape off %}
                    getchartT("div[id='lab-time1']", {{ global_lab_info|safe }}, "{{ procedures }}");
                    {% endautoescape %}
                    </script>
                </div>
           </div>
        </div><div class="timepane col-md-9" id="time_bar">
           <div class="timerow" id="time">
                <div class="chartcol3" id="lab-time2">
                    <script>
                    {% autoescape off %}
                    getchartT("div[id='lab-time2']", {{ global_lab_info|safe }}, "{{ procedures }}");
                    {% endautoescape %}
                    </script>
                </div>
           </div><div class="timerow" id="time">
                <div class="chartcol3" id="lab-time3">
                    <script>
                    {% autoescape off %}
                    getchartT("div[id='lab-time3']", {{ global_lab_info|safe }}, "{{ procedures }}");
                    {% endautoescape %}
                    </script>
                </div>
           </div><div class="timerow" id="time">
                <div class="chartcol3" id="lab-time4">
                    <script>
                    {% autoescape off %}
                    getchartT("div[id='lab-time4']", {{ global_lab_info|safe }}, "{{ procedures }}");
                    {% endautoescape %}
                    </script>
                </div>
           </div><div class="timerow" id="time">
                <div class="chartcol3" id="lab-time5">
                    <script>
                    {% autoescape off %}
                    getchartT("div[id='lab-time5']", {{ global_lab_info|safe }}, "{{ procedures }}");
                    {% endautoescape %}
                    </script>
                </div>
           </div>
        </div>


        <div class="col-lg-3 vitmedbox scroll-box">

            <div class="col-lg-12 half-vitmedbox scroll-box" id="vit_tracking">
                {% for group_name in group_order_3 %}
                <div class="lab-group col-md-12" id="{{group_name}}">
                        <div class="charttitlerow"  onclick="remove_vertical_point()">
                            {{  group_name}}
                            <div id="g_btn_{{group_name}}" class="btn expander" onclick="toggle_g_btn('{{group_name}}')"><span class='glyphicon glyphicon-resize-small' aria-hidden='true'></span>
                        </div>
                      </div>

                    {% for lab in group_info|get_labnames:group_name %}
                        {% if lab in lab_info %}
                       <div class="vitalrow" id="{{ lab }}">
                           <div class="chartcol1" onclick="toggle_chartrow3('lab{{ lab }}')"> {{ lab_names|get_fixed_name:lab}}</div>
                            <div class="chartcol2" onclick="toggle_chartrow3('lab{{ lab }}')">{{ recent|get_recent_value:lab}}</div>
                                <script>
                                {% autoescape off %}
                                showgroup("{{ group_name }}");
                                {% endautoescape %}
                                </script>
                       </div>
                        {% endif %}
                    {% endfor %}
                </div>
                   {% endfor %}
            </div><div class="col-lg-12 half-vitmedbox scroll-box t-border" id="med_tracking">
                {% for group_name in group_order_4 %}
                <div class="lab-group col-md-12" id="{{group_name}}">
                        <div class="charttitlerow"  onclick="remove_vertical_point()">
                            {{  group_name}}
                            <div id="g_btn_{{group_name}}" class="btn expander" onclick="toggle_g_btn('{{group_name}}')"><span class='glyphicon glyphicon-resize-small' aria-hidden='true'></span>
                        </div>
                      </div>

                    {% for lab in group_info|get_labnames:group_name %}
                        {% if lab in lab_info %}
                       <div class="medrow" id="{{ lab }}">
                           <div class="chartcol1" onclick="toggle_chartrow3('lab{{ lab }}')"> {{ lab_names|get_fixed_name:lab}}</div>
                            <div class="chartcol2" onclick="toggle_chartrow3('lab{{ lab }}')">{{ recent|get_recent_value:lab}}</div>
                                <script>
                                {% autoescape off %}
                                showgroup("{{ group_name }}");
                                {% endautoescape %}
                                </script>
                       </div>
                        {% endif %}
                    {% endfor %}
                </div>
                   {% endfor %}
            </div>


        </div><div class="col-lg-9 labbox scroll-box" id="lab_tracking">
               {% for group_name in group_order %}
            <div class="lab-group col-md-12" id="{{group_name}}">
                    <div class="charttitlerow"  onclick="remove_vertical_point()">
                        {{  group_name}}
                        <div id="g_btn_{{group_name}}" class="btn expander" onclick="toggle_g_btn('{{group_name}}')"><span class='glyphicon glyphicon-resize-small' aria-hidden='true'></span> </div>
                    </div>

                {% for lab in group_info|get_labnames:group_name %}
                    {% if lab in lab_info %}
                   <div class="chartrow" id="{{ lab }}">
                       <div class="chartcol1" onclick="toggle_chartrow3('lab{{ lab }}')"> {{ lab_names|get_fixed_name:lab}}</div>
                        <div class="chartcol2" onclick="toggle_chartrow3('lab{{ lab }}')">{{ recent|get_recent_value:lab}}</div>
                            <script>
                            {% autoescape off %}
                            showgroup("{{ group_name }}");
                            {% endautoescape %}
                            </script>
                   </div>
                    {% endif %}
                {% endfor %}
            </div>
               {% endfor %}
            </div>



    </div>

    <div class="col-lg-4 scroll-box">
        <ul class="nav nav-tabs nav-tabs-justified">
        <li>
            <a href="#handp-reports" data-toggle="tab"  onclick="remove_vertical_point()">H&P <span class="badge">{{ handp_report_dict|length }}</span></a>
        </li><li class="active">
            <a href="#progress-notes" data-toggle="tab" onclick="remove_vertical_point()">Prog. <span class="badge">{{ prog_note_dict|length }}</span></a>
        </li><li>
            <a href="#op-notes" data-toggle="tab" onclick="remove_vertical_point()">OP <span class="badge">{{ op_note_dict|length }}</span></a>
        </li><li>
            <a href="#rad-reports" data-toggle="tab" onclick="remove_vertical_point()">Rad. <span class="badge">{{ rad_report_dict|length }}</span></a>
        </li><li>
            <a href="#ekg-reports" data-toggle="tab" onclick="remove_vertical_point()">EKG <span class="badge">{{ ekg_report_dict|length }}</span></a>
        </li><li>
            <a href="#eeg-reports" data-toggle="tab" onclick="remove_vertical_point()">EEG <span class="badge">{{ eeg_report_dict|length }}</span></a>
        </li><li>
            <a href="#procedures" data-toggle="tab" onclick="remove_vertical_point()">Proc. <span class="badge">{{ procedures2 |length }}</span></a>
        </li></ul>

        <div class="contentArea tab-content">
        {% include "LEMRinterface/report_template.html" with report_dict=eeg_report_dict div_id="eeg-reports" %}
        {% include "LEMRinterface/report_template.html" with report_dict=ekg_report_dict div_id="ekg-reports" %}
        {% include "LEMRinterface/report_template.html" with report_dict=handp_report_dict div_id="handp-reports" %}
        {% include "LEMRinterface/report_template.html" with report_dict=prog_note_dict div_id="progress-notes" %}
        {% include "LEMRinterface/report_template.html" with report_dict=op_note_dict div_id="op-notes" %}
        {% include "LEMRinterface/report_template.html" with report_dict=rad_report_dict div_id="rad-reports" %}
        {% include "LEMRinterface/procedure_template.html" with procedures_dict=procedures2 div_id="procedures" %}
        </div>

    </div>




</div>
</div>
    <script>
        {% for lab in labs_to_highlight %}
           highlight('{{ lab }}');
        {% endfor %}
    </script>

</body>
</html>
